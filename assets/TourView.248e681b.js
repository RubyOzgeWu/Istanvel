import{Q as m}from"./QImg.c1164aed.js";import{A as p,r as u,l as g,m as w,p as e,f as s,C as r,aY as d,aS as x,a_ as Q,aR as I,aT as _,G as S,J as k,Q as f,K as C}from"./index.ba8e8a10.js";import{Q as D,a as L}from"./QPopupProxy.c02836c6.js";import{Q as U}from"./QForm.82a065a9.js";import{C as q}from"./ClosePopup.04c8406c.js";import{u as B,a as N,S as P}from"./user.63492ea5.js";import"./use-cache.b0833c75.js";import"./QMenu.90b0984d.js";import"./selection.9debefde.js";var v="assets/Topkapi-Palace-3.d9e8e1be.jpg";const R={class:"q-pa-md",id:"TourView"},j={class:"banner"},A={class:"absolute-full text-subtitle2 flex column flex-center"},M={class:"row content"},E={class:"col-8 info",style:{border:"2px solid yellow"}},F={class:"title"},G={class:"description"},J={class:"text-white"},K=e("thead",null,[e("th"),e("th")],-1),Y=e("td",null,"Included",-1),z=e("td",null,"Departure Time",-1),H=e("td",null,"Departure Location",-1),O=e("td",null,"Note",-1),W={class:"col-4 order"},X={class:"row items-center justify-end"},Z=C("add to the cart"),ue={__name:"TourView",setup($){const h=Q(),y=I(),V=B(),t=p({_id:"",name:"123",description:"",departureLocation:"",departureTime:"",included:"",notIncluded:"",openTime:"",address:"",note:"",image:"",price:0,category:"",sell:!1}),i=u("2022/01/01"),n=u(0),b=p([o=>o>=1||"At least one ticket"]),c=u(!1);(async()=>{try{const{data:o}=await N.get("/tours/"+h.params.id);t._id=o.result._id,t.name=o.result.name,t.description=o.result.description,t.departureLocation=o.result.departureLocation,t.departureTime=o.result.departureTime,t.included=o.result.included,t.notIncluded=o.result.notIncluded,t.openTime=o.result.openTime,t.address=o.result.address,t.note=o.result.note,t.image=o.result.image,t.price=o.result.price,t.category=o.result.category,t.sell=o.result.sell}catch{P.fire({icon:"error",title:"failed",text:"failed to get the tour info."}),y.go(-1)}})();const T=()=>{V.addCart({tour:t._id,date:i.value,quantity:n.value},1)};return(o,l)=>(g(),w("div",R,[e("div",j,[s(m,{src:v},{default:r(()=>[e("div",A,[e("h2",null,d(t.name),1)])]),_:1})]),e("div",M,[e("div",E,[e("p",F,d(t.name),1),e("p",G,d(t.description),1),e("table",J,[K,e("tbody",null,[e("tr",null,[Y,e("td",null,d(t.included),1)]),e("tr",null,[z,e("td",null,d(t.departureTime),1)]),e("tr",null,[H,e("td",null,d(t.departureLocation),1)]),e("tr",null,[O,e("td",null,d(t.note),1)])])]),s(m,{src:v})]),e("div",W,[s(U,{modelValue:c.value,"onUpdate:modelValue":l[3]||(l[3]=a=>c.value=a),onSubmit:x(T,["prevent"])},{default:r(()=>[s(_,{filled:"",modelValue:i.value,"onUpdate:modelValue":l[1]||(l[1]=a=>i.value=a),mask:"date",rules:["date"]},{append:r(()=>[s(S,{name:"event",class:"cursor-pointer"},{default:r(()=>[s(D,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:r(()=>[s(L,{modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=a=>i.value=a)},{default:r(()=>[e("div",X,[k(s(f,{label:"Close",color:"primary",flat:""},null,512),[[q]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(_,{filled:"",modelValue:n.value,"onUpdate:modelValue":l[2]||(l[2]=a=>n.value=a),modelModifiers:{number:!0},type:"number",label:"number of ticket",rules:b},null,8,["modelValue","rules"]),s(f,{color:"secondary",type:"submit"},{default:r(()=>[Z]),_:1})]),_:1},8,["modelValue","onSubmit"])])])]))}};export{ue as default};
