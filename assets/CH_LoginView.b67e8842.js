import{Q as g,a as F,b as V}from"./QTabPanels.d0deb5e4.js";import{Q as c}from"./QTabs.342f84e2.js";import{aQ as P,y as L,r as d,A as m,k as C,l as S,n as p,f as l,C as r,aR as R,aS as $,aT as k,aU as w,I as q,aV as b,aW as t,G as y,Q as U}from"./index.b7f7735e.js";import{Q as v}from"./QForm.539f6b59.js";import{_ as T}from"./plugin-vue_export-helper.21dcd24c.js";import{v as z}from"./index.0517b504.js";import"./use-panel.43259367.js";import"./touch.70a9dd44.js";import"./selection.33448140.js";import"./use-cache.b0833c75.js";import"./QResizeObserver.7cb54d81.js";import"./rtl.4b414a6d.js";const A=P({name:"CH_LoginView",setup(){const e=$(),s=L(),i=d(null),n=m({email:"",account:"",password:""}),u=m({account:"",password:""}),f=m({account:[o=>!!o||"\u5E33\u6236\u5FC5\u586B",o=>o.length>=4&&o.length<=20||"\u5E33\u6236\u540D\u7A31\u9577\u5EA6\u61C9\u57284-20\u5B57\u4EE5\u5167",o=>/^[a-zA-Z0-9]+$/.test(o)||"\u5E33\u6236\u540D\u7A31\u53EA\u80FD\u70BA\u82F1\u6587\u5B57\u6BCD\u6216\u6578\u5B57"],email:[o=>!!o||"\u4FE1\u7BB1\u5FC5\u586B",o=>z.exports.isEmail(o)||"\u8ACB\u586B\u5165\u6B63\u78BA\u7684\u4FE1\u7BB1\u683C\u5F0F"],password:[o=>!!o||"\u5BC6\u78BC\u5FC5\u586B",o=>o.length>=4&&o.length<=20||"\u5BC6\u78BC\u9577\u5EA6\u61C9\u57284-20\u5B57\u4EE5\u5167",o=>/^[a-zA-Z0-9]+$/.test(o)||"\u5BC6\u78BC\u53EA\u80FD\u70BA\u82F1\u6587\u6216\u6578\u5B57"]}),a=async()=>{console.log("ok");try{await k.post("/users",n),await w.fire({icon:"success",title:"\u6210\u529F",text:"\u8A3B\u518A\u6210\u529F"}),e.push("/CH_MainLayout")}catch(o){w.fire({icon:"error",title:"\u5931\u6557",text:o.isAxiosError&&o.response.data?o.response.data.message:"\u767C\u751F\u932F\u8AA4"})}},Q=()=>{s.chLogin(u)};return{tab:d("login"),signUpForm:n,LoginForm:u,rules:f,inputRef:i,isPwd:d(!0),register:a,login:Q,reset(){i.value.resetValidation()}}}}),B={class:"q-pa-md",id:"LoginView"},E={class:"q-gutter-y-md",style:{"max-width":"600px"}},H=p("div",{class:"text-h6 text-center"},"\u767B\u5165",-1),I=p("div",{class:"text-h6 text-center"},"\u8A3B\u518A",-1);function M(e,s,i,n,u,f){return C(),S("div",B,[p("div",E,[l(R,null,{default:r(()=>[l(c,{modelValue:e.tab,"onUpdate:modelValue":s[0]||(s[0]=a=>e.tab=a),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:r(()=>[l(g,{name:"login",label:"\u767B\u5165"}),l(g,{name:"signUp",label:"\u8A3B\u518A"})]),_:1},8,["modelValue"]),l(q),l(F,{modelValue:e.tab,"onUpdate:modelValue":s[9]||(s[9]=a=>e.tab=a),animated:""},{default:r(()=>[l(V,{name:"login",class:"column"},{default:r(()=>[H,l(v,{onSubmit:b(e.login,["prevent"])},{default:r(()=>[l(t,{ref:"inputRef",modelValue:e.LoginForm.account,"onUpdate:modelValue":s[1]||(s[1]=a=>e.LoginForm.account=a),label:"\u5E33\u6236\u540D\u7A31",rules:e.rules.account},null,8,["modelValue","rules"]),l(t,{ref:"inputRef",modelValue:e.LoginForm.password,"onUpdate:modelValue":s[3]||(s[3]=a=>e.LoginForm.password=a),type:e.isPwd?"password":"text",label:"\u5BC6\u78BC",rules:e.rules.password},{append:r(()=>[l(y,{name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:s[2]||(s[2]=a=>e.isPwd=!e.isPwd)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),l(U,{type:"submit",size:"22px",class:"q-px-xl q-py-xs",color:"secondary",label:"\u767B\u5165"})]),_:1},8,["onSubmit"])]),_:1}),l(V,{name:"signUp",class:"column"},{default:r(()=>[I,l(v,{modelValue:e.valid,"onUpdate:modelValue":s[8]||(s[8]=a=>e.valid=a),onSubmit:b(e.register,["prevent"])},{default:r(()=>[l(t,{ref:"inputRef",modelValue:e.signUpForm.account,"onUpdate:modelValue":s[4]||(s[4]=a=>e.signUpForm.account=a),label:"\u5E33\u6236\u540D\u7A31",rules:e.rules.account},null,8,["modelValue","rules"]),l(t,{ref:"inputRef",modelValue:e.signUpForm.email,"onUpdate:modelValue":s[5]||(s[5]=a=>e.signUpForm.email=a),label:"\u4FE1\u7BB1",rules:e.rules.email},null,8,["modelValue","rules"]),l(t,{ref:"inputRef",modelValue:e.signUpForm.password,"onUpdate:modelValue":s[7]||(s[7]=a=>e.signUpForm.password=a),type:e.isPwd?"password":"text",label:"\u5BC6\u78BC",rules:e.rules.password},{append:r(()=>[l(y,{name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:s[6]||(s[6]=a=>e.isPwd=!e.isPwd)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),l(U,{type:"submit",size:"22px",class:"q-px-xl q-py-xs",color:"secondary",label:"Sign up"})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])}var x=T(A,[["render",M]]);export{x as default};
