import{Q as s}from"./QTable.ff0809d5.js";import{E as c,k as m,l as p,f as d,bd as u,aV as f}from"./index.9bc2ee3b.js";import"./QList.9bd5d579.js";import"./QMarkupTable.39db0c8e.js";import"./QSelect.920d6a3c.js";import"./QItem.8c7afa49.js";import"./QMenu.dc40d790.js";import"./selection.56d9ef54.js";import"./rtl.4b414a6d.js";import"./use-fullscreen.d9f0f74e.js";const _={class:"q-pa-md"},I={__name:"CH_OrderView",setup(w){const a=c([]),l=[{name:"ID",required:!0,label:"ID",align:"left",field:e=>e._id,format:e=>`${e}`,sortable:!0},{name:"date",align:"center",field:e=>new Date(e.date).toLocaleDateString(),label:"\u65E5\u671F"},{name:"edit",label:"\u7E3D\u5171",field:e=>e.totalPrice,sortable:!0}];return(async()=>{try{const{data:e}=await u.get("/orders");a.push(...e.result.map(t=>(t.totalPrice=t.order.reduce((n,r)=>{var i,o;return n+((i=r.tour)==null?void 0:i.price)||((o=r.activity)==null?void 0:o.price)*r.quantity},0),t)))}catch(e){console.log(e),f.fire({icon:"error",title:"\u5931\u6557",text:"\u53D6\u5F97\u8A02\u55AE\u5931\u6557"})}})(),(e,t)=>(m(),p("div",_,[d(s,{grid:e.$q.screen.lt.md,title:"\u6211\u7684\u8A02\u55AE",rows:a,columns:l,"row-key":"name",filter:e.filter},null,8,["grid","rows","filter"])]))}};export{I as default};
