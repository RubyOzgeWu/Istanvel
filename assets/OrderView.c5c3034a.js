import{A as g,r as w,l as d,m as u,f as l,C as r,b6 as v,F as m,p as t,aZ as C,aY as i,Q as _,aQ as Q,aX as h,bs as y,J as x,K as D}from"./index.fa63224b.js";import{Q as V}from"./QMarkupTable.4082b41b.js";import{C as b}from"./ClosePopup.510d29c3.js";import{b as k,S as O}from"./user.aa2d8d72.js";const S=t("thead",null,[t("th",null,"Order ID"),t("th",null,"Ordered date"),t("th",null,"Total"),t("th")],-1),B=D("detail"),A=t("div",{class:"text-h6"},"Order",-1),L={__name:"OrderView",setup(N){const c=g([]),o=w(!1);return(async()=>{try{const{data:s}=await k.get("/orders");c.push(...s.result.map(e=>(e.totalPrice=e.order.reduce((a,n)=>{var p,f;return a+((p=n.tour)==null?void 0:p.price)||((f=n.activity)==null?void 0:f.price)*n.quantity},0),e)))}catch(s){console.log(s),O.fire({icon:"error",title:"failed",text:"Cannot get the order"})}})(),(s,e)=>(d(),u(m,null,[l(V,null,{default:r(()=>[S,t("tbody",null,[(d(!0),u(m,null,C(c,a=>(d(),u("tr",{key:a._id},[t("td",null,i(a._id),1),t("td",null,i(new Date(a.date).toLocaleDateString()),1),t("td",null,i(a.totalPrice),1),t("td",null,[l(_,{onClick:e[0]||(e[0]=n=>o.value=!0),detail:s.detail},{default:r(()=>[B]),_:1},8,["detail"])])]))),128))])]),_:1}),l(v,{modelValue:o.value,"onUpdate:modelValue":e[1]||(e[1]=a=>o.value=a),"full-width":""},{default:r(()=>[l(Q,{style:{width:"700px","max-width":"80vw"}},{default:r(()=>[l(h,null,{default:r(()=>[A]),_:1}),l(h,{class:"q-pt-none"},{default:r(()=>[t("p",null,i(s.row._id),1)]),_:1}),l(y,{align:"right",class:"bg-white text-teal"},{default:r(()=>[x(l(_,{flat:"",label:"OK"},null,512),[[b]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};export{L as default};
