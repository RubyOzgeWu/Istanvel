import{Q as y}from"./QImg.2af157fb.js";import{A as m,r as n,l as g,m as b,p as a,f as s,C as r,aY as d,aS as Q,a_ as h,aR as w,aT as p,G as x,J as T,Q as _,K as S}from"./index.164d3cae.js";import{Q as I,a as q}from"./QPopupProxy.13d30876.js";import{Q as U}from"./QForm.aeb85f26.js";import{C as B}from"./ClosePopup.015b7409.js";import{u as R,a as k,S as D}from"./user.f01c075c.js";import"./use-cache.b0833c75.js";import"./QMenu.15163526.js";import"./selection.98a27e5c.js";const L={class:"q-pa-md",id:"TourView"},N={class:"banner"},P={class:"absolute-full text-subtitle2 flex column flex-center"},j={class:"row"},M={class:"col-9"},A={class:"col-3"},E={class:"row items-center justify-end"},F=S("\u8A02\u8CFC"),te={__name:"CH_TourView",setup(G){const C=h(),f=w(),v=R(),e=m({_id:"",CH_name:"",CH_description:"",departureLocation:"",departureTime:"",CH_included:"",CH_notIncluded:"",openTime:"",address:"",CH_note:"",image:"",price:0,CH_category:"",sell:!1}),u=n("2022/01/01"),i=n(0),H=m([t=>t>=1||"\u6578\u91CF\u932F\u8AA4"]),c=n(!1);(async()=>{try{const{data:t}=await k.get("/tours/"+C.params.id);e._id=t.result._id,e.CH_name=t.result.CH_name,e.CH_description=t.result.CH_description,e.departureLocation=t.result.departureLocation,e.departureTime=t.result.departureTime,e.CH_included=t.result.CH_included,e.CH_notIncluded=t.result.CH_notIncluded,e.openTime=t.result.openTime,e.address=t.result.address,e.CH_note=t.result.CH_note,e.image=t.result.image,e.price=t.result.price,e.CH_category=t.result.CH_category,e.sell=t.result.sell}catch{D.fire({icon:"error",title:"\u5931\u6557",text:"\u53D6\u5F97\u5546\u54C1\u8CC7\u6599\u5931\u6557"}),f.go(-1)}})();const V=()=>{console.log(u.value),v.CH_addCart({tour:e._id,date:u.value,quantity:i.value},1)};return(t,o)=>(g(),b("div",L,[a("div",N,[s(y,{src:"https://cdn.quasar.dev/img/parallax2.jpg"},{default:r(()=>[a("div",P,[a("h1",null,d(e.CH_name),1)])]),_:1})]),a("div",j,[a("div",M,[a("h1",null,d(e.CH_name),1),a("span",null,d(e.CH_description),1)]),a("div",A,[s(U,{modelValue:c.value,"onUpdate:modelValue":o[3]||(o[3]=l=>c.value=l),onSubmit:Q(V,["prevent"])},{default:r(()=>[s(p,{filled:"",modelValue:u.value,"onUpdate:modelValue":o[1]||(o[1]=l=>u.value=l),mask:"date",rules:["date"]},{append:r(()=>[s(x,{name:"event",class:"cursor-pointer"},{default:r(()=>[s(I,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:r(()=>[s(q,{modelValue:u.value,"onUpdate:modelValue":o[0]||(o[0]=l=>u.value=l)},{default:r(()=>[a("div",E,[T(s(_,{label:"Close",color:"primary",flat:""},null,512),[[B]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(p,{filled:"",modelValue:i.value,"onUpdate:modelValue":o[2]||(o[2]=l=>i.value=l),modelModifiers:{number:!0},type:"number",label:"\u7968\u6578",rules:H},null,8,["modelValue","rules"]),s(_,{color:"secondary",type:"submit"},{default:r(()=>[F]),_:1})]),_:1},8,["modelValue","onSubmit"])])])]))}};export{te as default};
