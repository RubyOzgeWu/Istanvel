import{Q as V}from"./QResizeObserver.04897a7f.js";import{y as C,r as p,c as d,w,Z as E,V as _,h as v,g as P,i as M,al as O,o as N,am as A,af as U,$ as j,an as I,ao as K,L as D,ap as W,aq as Z,ar as k,a2 as R,A as L,a as G,as as J}from"./index.049d7952.js";var oe=C({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:S,emit:a}){const{proxy:{$q:l}}=P(),o=M(O,()=>{console.error("QHeader needs to be child of QLayout")}),r=p(parseInt(e.heightHint,10)),u=p(!0),m=d(()=>e.reveal===!0||o.view.value.indexOf("H")>-1||l.platform.is.ios&&o.isContainer.value===!0),h=d(()=>{if(e.modelValue!==!0)return 0;if(m.value===!0)return u.value===!0?r.value:0;const t=r.value-o.scroll.value.position;return t>0?t:0}),s=d(()=>e.modelValue!==!0||m.value===!0&&u.value!==!0),x=d(()=>e.modelValue===!0&&s.value===!0&&e.reveal===!0),y=d(()=>"q-header q-layout__section--marginal "+(m.value===!0?"fixed":"absolute")+"-top"+(e.bordered===!0?" q-header--bordered":"")+(s.value===!0?" q-header--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus":"")),b=d(()=>{const t=o.rows.value.top,f={};return t[0]==="l"&&o.left.space===!0&&(f[l.lang.rtl===!0?"right":"left"]=`${o.left.size}px`),t[2]==="r"&&o.right.space===!0&&(f[l.lang.rtl===!0?"left":"right"]=`${o.right.size}px`),f});function i(t,f){o.update("header",t,f)}function g(t,f){t.value!==f&&(t.value=f)}function T({height:t}){g(r,t),i("size",t)}function Q(t){x.value===!0&&g(u,!0),a("focusin",t)}w(()=>e.modelValue,t=>{i("space",t),g(u,!0),o.animate()}),w(h,t=>{i("offset",t)}),w(()=>e.reveal,t=>{t===!1&&g(u,e.modelValue)}),w(u,t=>{o.animate(),a("reveal",t)}),w(o.scroll,t=>{e.reveal===!0&&g(u,t.direction==="up"||t.position<=e.revealOffset||t.position-t.inflectionPoint<100)});const $={};return o.instances.header=$,e.modelValue===!0&&i("size",r.value),i("space",e.modelValue),i("offset",h.value),E(()=>{o.instances.header===$&&(o.instances.header=void 0,i("size",0),i("offset",0),i("space",!1))}),()=>{const t=_(S.default,[]);return e.elevated===!0&&t.push(v("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),t.push(v(V,{debounce:0,onResize:T})),v("header",{class:y.value,style:b.value,onFocusin:Q},t)}}});const{passive:F}=j,X=["both","horizontal","vertical"];var Y=C({name:"QScrollObserver",props:{axis:{type:String,validator:e=>X.includes(e),default:"vertical"},debounce:[String,Number],scrollTarget:{default:void 0}},emits:["scroll"],setup(e,{emit:S}){const a={position:{top:0,left:0},direction:"down",directionChanged:!1,delta:{top:0,left:0},inflectionPoint:{top:0,left:0}};let l=null,o,r;w(()=>e.scrollTarget,()=>{h(),m()});function u(){l!==null&&l();const y=Math.max(0,I(o)),b=K(o),i={top:y-a.position.top,left:b-a.position.left};if(e.axis==="vertical"&&i.top===0||e.axis==="horizontal"&&i.left===0)return;const g=Math.abs(i.top)>=Math.abs(i.left)?i.top<0?"up":"down":i.left<0?"left":"right";a.position={top:y,left:b},a.directionChanged=a.direction!==g,a.delta=i,a.directionChanged===!0&&(a.direction=g,a.inflectionPoint=a.position),S("scroll",{...a})}function m(){o=U(r,e.scrollTarget),o.addEventListener("scroll",s,F),s(!0)}function h(){o!==void 0&&(o.removeEventListener("scroll",s,F),o=void 0)}function s(y){if(y===!0||e.debounce===0||e.debounce==="0")u();else if(l===null){const[b,i]=e.debounce?[setTimeout(u,e.debounce),clearTimeout]:[requestAnimationFrame(u),cancelAnimationFrame];l=()=>{i(b),l=null}}}const x=P();return N(()=>{r=x.proxy.$el.parentNode,m()}),E(()=>{l!==null&&l(),h()}),Object.assign(x.proxy,{trigger:s,getPosition:()=>a}),A}}),ne=C({name:"QPageContainer",setup(e,{slots:S}){const{proxy:{$q:a}}=P(),l=M(O,()=>{console.error("QPageContainer needs to be child of QLayout")});W(Z,!0);const o=d(()=>{const r={};return l.header.space===!0&&(r.paddingTop=`${l.header.size}px`),l.right.space===!0&&(r[`padding${a.lang.rtl===!0?"Left":"Right"}`]=`${l.right.size}px`),l.footer.space===!0&&(r.paddingBottom=`${l.footer.size}px`),l.left.space===!0&&(r[`padding${a.lang.rtl===!0?"Right":"Left"}`]=`${l.left.size}px`),r});return()=>v("div",{class:"q-page-container",style:o.value},D(S.default))}}),le=C({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:S,emit:a}){const{proxy:{$q:l}}=P(),o=p(null),r=p(l.screen.height),u=p(e.container===!0?0:l.screen.width),m=p({position:0,direction:"down",inflectionPoint:0}),h=p(0),s=p(k.value===!0?0:R()),x=d(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),y=d(()=>e.container===!1?{minHeight:l.screen.height+"px"}:null),b=d(()=>s.value!==0?{[l.lang.rtl===!0?"left":"right"]:`${s.value}px`}:null),i=d(()=>s.value!==0?{[l.lang.rtl===!0?"right":"left"]:0,[l.lang.rtl===!0?"left":"right"]:`-${s.value}px`,width:`calc(100% + ${s.value}px)`}:null);function g(n){if(e.container===!0||document.qScrollPrevented!==!0){const c={position:n.position.top,direction:n.direction,directionChanged:n.directionChanged,inflectionPoint:n.inflectionPoint.top,delta:n.delta.top};m.value=c,e.onScroll!==void 0&&a("scroll",c)}}function T(n){const{height:c,width:z}=n;let q=!1;r.value!==c&&(q=!0,r.value=c,e.onScrollHeight!==void 0&&a("scroll-height",c),$()),u.value!==z&&(q=!0,u.value=z),q===!0&&e.onResize!==void 0&&a("resize",n)}function Q({height:n}){h.value!==n&&(h.value=n,$())}function $(){if(e.container===!0){const n=r.value>h.value?R():0;s.value!==n&&(s.value=n)}}let t;const f={instances:{},view:d(()=>e.view),isContainer:d(()=>e.container),rootRef:o,height:r,containerHeight:h,scrollbarWidth:s,totalWidth:d(()=>u.value+s.value),rows:d(()=>{const n=e.view.toLowerCase().split(" ");return{top:n[0].split(""),middle:n[1].split(""),bottom:n[2].split("")}}),header:L({size:0,offset:0,space:!1}),right:L({size:300,offset:0,space:!1}),footer:L({size:0,offset:0,space:!1}),left:L({size:300,offset:0,space:!1}),scroll:m,animate(){t!==void 0?clearTimeout(t):document.body.classList.add("q-body--layout-animate"),t=setTimeout(()=>{document.body.classList.remove("q-body--layout-animate"),t=void 0},155)},update(n,c,z){f[n][c]=z}};if(W(O,f),R()>0){let z=function(){n=null,c.classList.remove("hide-scrollbar")},q=function(){if(n===null){if(c.scrollHeight>l.screen.height)return;c.classList.add("hide-scrollbar")}else clearTimeout(n);n=setTimeout(z,300)},H=function(B){n!==null&&B==="remove"&&(clearTimeout(n),z()),window[`${B}EventListener`]("resize",q)},n=null;const c=document.body;w(()=>e.container!==!0?"add":"remove",H),e.container!==!0&&H("add"),G(()=>{H("remove")})}return()=>{const n=J(S.default,[v(Y,{onScroll:g}),v(V,{onResize:T})]),c=v("div",{class:x.value,style:y.value,ref:e.container===!0?void 0:o,tabindex:-1},n);return e.container===!0?v("div",{class:"q-layout-container overflow-hidden",ref:o},[v(V,{onResize:Q}),v("div",{class:"absolute-full",style:b.value},[v("div",{class:"scroll",style:i.value},[c])])]):c}}});export{le as Q,oe as a,ne as b,Y as c};
