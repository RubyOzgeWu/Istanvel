import{A as g,r as w,k as d,l as u,f as l,C as r,ba as v,F as _,bd as C,aV as x,n as t,b1 as y,b0 as i,Q as h,aS as Q,a$ as m,bx as V,J as b,K as D}from"./index.2b3e6d31.js";import{Q as k}from"./QMarkupTable.891119f5.js";import{C as O}from"./ClosePopup.49e2e4de.js";const S=t("thead",null,[t("th",null,"Order ID"),t("th",null,"Ordered date"),t("th",null,"Total"),t("th")],-1),B=D("detail"),A=t("div",{class:"text-h6"},"Order",-1),K={__name:"OrderView",setup(N){const c=g([]),o=w(!1);return(async()=>{try{const{data:n}=await C.get("/orders");c.push(...n.result.map(e=>(e.totalPrice=e.order.reduce((a,s)=>{var p,f;return a+((p=s.tour)==null?void 0:p.price)||((f=s.activity)==null?void 0:f.price)*s.quantity},0),e)))}catch(n){console.log(n),x.fire({icon:"error",title:"failed",text:"Cannot get the order"})}})(),(n,e)=>(d(),u(_,null,[l(k,null,{default:r(()=>[S,t("tbody",null,[(d(!0),u(_,null,y(c,a=>(d(),u("tr",{key:a._id},[t("td",null,i(a._id),1),t("td",null,i(new Date(a.date).toLocaleDateString()),1),t("td",null,i(a.totalPrice),1),t("td",null,[l(h,{onClick:e[0]||(e[0]=s=>o.value=!0),detail:n.detail},{default:r(()=>[B]),_:1},8,["detail"])])]))),128))])]),_:1}),l(v,{modelValue:o.value,"onUpdate:modelValue":e[1]||(e[1]=a=>o.value=a),"full-width":""},{default:r(()=>[l(Q,{style:{width:"700px","max-width":"80vw"}},{default:r(()=>[l(m,null,{default:r(()=>[A]),_:1}),l(m,{class:"q-pt-none"},{default:r(()=>[t("p",null,i(n.row._id),1)]),_:1}),l(V,{align:"right",class:"bg-white text-teal"},{default:r(()=>[b(l(h,{flat:"",label:"OK"},null,512),[[O]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};export{K as default};
