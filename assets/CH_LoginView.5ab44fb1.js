import{Q as g,a as F,b as w}from"./QTabPanels.67a5ffc2.js";import{Q as c}from"./QTabs.ba4006ba.js";import{aH as P,r as d,A as m,l as L,m as S,p,f as l,C as r,aQ as C,aR as R,I as $,aS as V,aT as t,G as b,Q as y}from"./index.049d7952.js";import{Q as v}from"./QForm.b7e384b2.js";import{u as q,a as k,S as U}from"./user.ae2e6362.js";import{_ as T}from"./plugin-vue_export-helper.21dcd24c.js";import{v as z}from"./index.0517b504.js";import"./use-panel.46993b9d.js";import"./touch.70a9dd44.js";import"./selection.c5927061.js";import"./use-cache.b0833c75.js";import"./QResizeObserver.04897a7f.js";import"./rtl.4b414a6d.js";const A=P({name:"CH_LoginView",setup(){const e=R(),o=q(),i=d(null),n=m({email:"",account:"",password:""}),u=m({account:"",password:""}),f=m({account:[s=>!!s||"\u5E33\u6236\u5FC5\u586B",s=>s.length>=4&&s.length<=20||"\u5E33\u6236\u540D\u7A31\u9577\u5EA6\u61C9\u57284-20\u5B57\u4EE5\u5167",s=>/^[a-zA-Z0-9]+$/.test(s)||"\u5E33\u6236\u540D\u7A31\u53EA\u80FD\u70BA\u82F1\u6587\u5B57\u6BCD\u6216\u6578\u5B57"],email:[s=>!!s||"\u4FE1\u7BB1\u5FC5\u586B",s=>z.exports.isEmail(s)||"\u8ACB\u586B\u5165\u6B63\u78BA\u7684\u4FE1\u7BB1\u683C\u5F0F"],password:[s=>!!s||"\u5BC6\u78BC\u5FC5\u586B",s=>s.length>=4&&s.length<=20||"\u5BC6\u78BC\u9577\u5EA6\u61C9\u57284-20\u5B57\u4EE5\u5167",s=>/^[a-zA-Z0-9]+$/.test(s)||"\u5BC6\u78BC\u53EA\u80FD\u70BA\u82F1\u6587\u6216\u6578\u5B57"]}),a=async()=>{console.log("ok");try{await k.post("/users",n),await U.fire({icon:"success",title:"\u6210\u529F",text:"\u8A3B\u518A\u6210\u529F"}),e.push("/CH_MainLayout")}catch(s){U.fire({icon:"error",title:"\u5931\u6557",text:s.isAxiosError&&s.response.data?s.response.data.message:"\u767C\u751F\u932F\u8AA4"})}},Q=()=>{o.chLogin(u)};return{tab:d("login"),signUpForm:n,LoginForm:u,rules:f,inputRef:i,isPwd:d(!0),register:a,login:Q,reset(){i.value.resetValidation()}}}}),B={class:"q-pa-md",id:"LoginView"},H={class:"q-gutter-y-md",style:{"max-width":"600px"}},E=p("div",{class:"text-h6 text-center"},"\u767B\u5165",-1),I=p("div",{class:"text-h6 text-center"},"\u8A3B\u518A",-1);function M(e,o,i,n,u,f){return L(),S("div",B,[p("div",H,[l(C,null,{default:r(()=>[l(c,{modelValue:e.tab,"onUpdate:modelValue":o[0]||(o[0]=a=>e.tab=a),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:r(()=>[l(g,{name:"login",label:"\u767B\u5165"}),l(g,{name:"signUp",label:"\u8A3B\u518A"})]),_:1},8,["modelValue"]),l($),l(F,{modelValue:e.tab,"onUpdate:modelValue":o[9]||(o[9]=a=>e.tab=a),animated:""},{default:r(()=>[l(w,{name:"login",class:"column"},{default:r(()=>[E,l(v,{onSubmit:V(e.login,["prevent"])},{default:r(()=>[l(t,{ref:"inputRef",modelValue:e.LoginForm.account,"onUpdate:modelValue":o[1]||(o[1]=a=>e.LoginForm.account=a),label:"\u5E33\u6236\u540D\u7A31",rules:e.rules.account},null,8,["modelValue","rules"]),l(t,{ref:"inputRef",modelValue:e.LoginForm.password,"onUpdate:modelValue":o[3]||(o[3]=a=>e.LoginForm.password=a),type:e.isPwd?"password":"text",label:"\u5BC6\u78BC",rules:e.rules.password},{append:r(()=>[l(b,{name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:o[2]||(o[2]=a=>e.isPwd=!e.isPwd)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),l(y,{type:"submit",size:"22px",class:"q-px-xl q-py-xs",color:"secondary",label:"\u767B\u5165"})]),_:1},8,["onSubmit"])]),_:1}),l(w,{name:"signUp",class:"column"},{default:r(()=>[I,l(v,{modelValue:e.valid,"onUpdate:modelValue":o[8]||(o[8]=a=>e.valid=a),onSubmit:V(e.register,["prevent"])},{default:r(()=>[l(t,{ref:"inputRef",modelValue:e.signUpForm.account,"onUpdate:modelValue":o[4]||(o[4]=a=>e.signUpForm.account=a),label:"\u5E33\u6236\u540D\u7A31",rules:e.rules.account},null,8,["modelValue","rules"]),l(t,{ref:"inputRef",modelValue:e.signUpForm.email,"onUpdate:modelValue":o[5]||(o[5]=a=>e.signUpForm.email=a),label:"\u4FE1\u7BB1",rules:e.rules.email},null,8,["modelValue","rules"]),l(t,{ref:"inputRef",modelValue:e.signUpForm.password,"onUpdate:modelValue":o[7]||(o[7]=a=>e.signUpForm.password=a),type:e.isPwd?"password":"text",label:"\u5BC6\u78BC",rules:e.rules.password},{append:r(()=>[l(b,{name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:o[6]||(o[6]=a=>e.isPwd=!e.isPwd)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),l(y,{type:"submit",size:"22px",class:"q-px-xl q-py-xs",color:"secondary",label:"Sign up"})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1},8,["modelValue"])]),_:1})])])}var _=T(A,[["render",M]]);export{_ as default};
