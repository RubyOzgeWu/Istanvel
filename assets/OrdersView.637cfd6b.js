import{r as d,A as p,l as u,m as f,f as o,C as c,aT as g,G as b}from"./index.164d3cae.js";import{Q as h}from"./QTable.42238f9a.js";import{b as w,S as _}from"./user.f01c075c.js";import"./QList.9d6eae68.js";import"./QMarkupTable.75fa0428.js";import"./QSelect.65860bdc.js";import"./QItem.afebba27.js";import"./QMenu.15163526.js";import"./selection.98a27e5c.js";import"./rtl.4b414a6d.js";import"./use-fullscreen.70e7c756.js";const I={class:"q-pa-md",id:"OrdersView"},P={__name:"OrdersView",setup(v){const r=d(""),n=p([]),m=[{name:"ID",required:!0,label:"ID",align:"left",field:e=>e._id,format:e=>`${e}`,sortable:!0},{name:"account",align:"center",field:e=>e.user.account,label:"\u8A02\u55AE\u5E33\u6236"},{name:"name",align:"center",field:e=>e.orderInfo[0].name,label:"\u8A02\u8CFC\u4EBA\u59D3\u540D"},{name:"name",align:"center",field:e=>e.orderInfo[0].email,label:"\u8A02\u8CFC\u4EBA\u4FE1\u7BB1"},{name:"name",align:"center",field:e=>e.orderInfo[0].phone,label:"\u8A02\u8CFC\u4EBA\u96FB\u8A71"},{name:"date",align:"center",field:e=>new Date(e.date).toLocaleDateString(),label:"\u8A02\u55AE\u65E5\u671F"},{name:"edit",label:"total",field:e=>e.totalPrice,sortable:!0}];return(async()=>{try{const{data:e}=await w.get("/orders/all");n.push(...e.result.map(t=>(t.totalPrice=t.order.reduce((a,l)=>{var i,s;return a+((i=l.tour)==null?void 0:i.price)||((s=l.activity)==null?void 0:s.price)*l.quantity},0),t)))}catch(e){console.log(e),_.fire({icon:"error",title:"failed",text:"Cannot get the order"})}})(),(e,t)=>(u(),f("div",I,[o(h,{grid:e.$q.screen.lt.md,title:"\u8A02\u55AE\u7BA1\u7406",rows:n,columns:m,"row-key":"name",filter:r.value},{"top-right":c(()=>[o(g,{borderless:"",dense:"",debounce:"300",modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=a=>r.value=a),placeholder:"Search"},{append:c(()=>[o(b,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["grid","rows","filter"])]))}};export{P as default};
