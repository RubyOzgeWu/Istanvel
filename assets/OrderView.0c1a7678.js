import{A as w,r as g,k as d,l as u,f as l,C as r,b9 as v,F as _,bc as C,aU as y,n as t,b0 as Q,a$ as i,Q as h,aR as x,a_ as m,bw as D,J as V,K as b}from"./index.5ef8ba6c.js";import{Q as k}from"./QMarkupTable.cd57968b.js";import{C as O}from"./ClosePopup.1c28ff9a.js";const B=t("thead",null,[t("th",null,"Order ID"),t("th",null,"Ordered date"),t("th",null,"Total"),t("th")],-1),S=b("detail"),A=t("div",{class:"text-h6"},"Order",-1),K={__name:"OrderView",setup(N){const c=w([]),o=g(!1);return(async()=>{try{const{data:n}=await C.get("/orders");c.push(...n.result.map(e=>(e.totalPrice=e.order.reduce((a,s)=>{var p,f;return a+((p=s.tour)==null?void 0:p.price)||((f=s.activity)==null?void 0:f.price)*s.quantity},0),e)))}catch(n){console.log(n),y.fire({icon:"error",title:"failed",text:"Cannot get the order"})}})(),(n,e)=>(d(),u(_,null,[l(k,null,{default:r(()=>[B,t("tbody",null,[(d(!0),u(_,null,Q(c,a=>(d(),u("tr",{key:a._id},[t("td",null,i(a._id),1),t("td",null,i(new Date(a.date).toLocaleDateString()),1),t("td",null,i(a.totalPrice),1),t("td",null,[l(h,{onClick:e[0]||(e[0]=s=>o.value=!0),detail:n.detail},{default:r(()=>[S]),_:1},8,["detail"])])]))),128))])]),_:1}),l(v,{modelValue:o.value,"onUpdate:modelValue":e[1]||(e[1]=a=>o.value=a),"full-width":""},{default:r(()=>[l(x,{style:{width:"700px","max-width":"80vw"}},{default:r(()=>[l(m,null,{default:r(()=>[A]),_:1}),l(m,{class:"q-pt-none"},{default:r(()=>[t("p",null,i(n.row._id),1)]),_:1}),l(D,{align:"right",class:"bg-white text-teal"},{default:r(()=>[V(l(h,{flat:"",label:"OK"},null,512),[[O]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};export{K as default};
