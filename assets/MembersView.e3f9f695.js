import{A as _,r as n,l as h,m as w,p as m,f as a,C as s,aT as g,G as b,K as u,aY as x,Q as v}from"./index.ba8e8a10.js";import{Q}from"./QTd.0a02bbf3.js";import{Q as y}from"./QTable.4153bee3.js";import{b as d,S as i}from"./user.63492ea5.js";import"./QList.a026841d.js";import"./QMarkupTable.f907ef64.js";import"./QSelect.665ed341.js";import"./QItem.5fa24591.js";import"./QMenu.90b0984d.js";import"./selection.9debefde.js";import"./rtl.4b414a6d.js";import"./use-fullscreen.3197ee31.js";const V={class:"q-pa-md"},k={class:"row"},A={class:"col-12"},E=u("\u522A\u9664"),j={__name:"MembersView",setup(B){const p=[{name:"account",required:!0,label:"Account",align:"left",field:e=>e.account,format:e=>`${e}`,sortable:!0},{name:"Email",align:"center",label:"Email",field:e=>e.email,sortable:!0},{name:"deleteUser",label:"\u522A\u9664",align:"right",sortable:!0}],o=_([]);n([]);const l=n(""),c=async()=>{try{const{data:e}=await d.get("/users/all");o.splice(0,o.length),o.push(...e.result)}catch(e){console.log(e),i.fire({icon:"error",title:"\u5931\u6557",text:e.isAxiosError?e.response.data.message:e.message})}};c();const f=async e=>{console.log(e);try{await d.delete("/users/"+e),await i.fire({icon:"success",title:"\u6210\u529F",text:"\u522A\u9664\u6210\u529F"}),c()}catch(t){await i.fire({icon:"success",title:"\u5931\u6557",text:t.isAxiosError&&t.response.data?t.response.data.message:"\u767C\u751F\u932F\u8AA4"})}};return(e,t)=>(h(),w("div",V,[m("div",k,[m("div",A,[a(y,{title:"\u6703\u54E1\u7BA1\u7406",rows:o,columns:p,"row-key":"account",filter:l.value},{"top-right":s(()=>[a(g,{borderless:"",dense:"",debounce:"300",modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=r=>l.value=r),placeholder:"Search"},{append:s(()=>[a(b,{name:"search"})]),_:1},8,["modelValue"])]),"body-cell-deleteUser":s(r=>[a(Q,null,{default:s(()=>[u(x(r.row._id)+" ",1),a(v,{onClick:C=>f(r.row._id)},{default:s(()=>[E]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["rows","filter"])])])]))}};export{j as default};
